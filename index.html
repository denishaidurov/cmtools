<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CM Tools</title>
    <style>
        :root {
            /* --- –¢–ï–ú–ù–ê–Ø –¢–ï–ú–ê --- */
            --bg-body: #0f172a;       
            --bg-card: #1e293b;       
            --input-bg: #334155;      
            --text-main: #f1f5f9;     
            --text-muted: #94a3b8;    
            --border-color: #475569;
            
            /* –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –±—Ä–µ–Ω–¥–∞ */
            --brand-gradient: linear-gradient(135deg, #ec4899 0%, #eab308 100%); 
            --brand-gradient-hover: linear-gradient(135deg, #f06292 0%, #ffca28 100%); 
            --brand-glow: rgba(236, 72, 153, 0.4);
            --success-color: #10b981;

            /* –§–æ–Ω –¥–ª—è –∫–æ–¥–∞ */
            --code-bg-light: #1a2333;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 40px 20px;
            background-color: var(--bg-body);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: var(--bg-card);
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--brand-gradient);
            border-radius: 24px 24px 0 0;
        }

        /* --- –°–¢–ò–õ–ò –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–Ø --- */
        .mode-switcher-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .mode-switcher {
            background-color: var(--input-bg);
            padding: 5px;
            border-radius: 50px;
            display: flex;
            gap: 5px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }

        .mode-switcher input[type="radio"] {
            display: none;
        }

        .mode-switcher label {
            padding: 10px 35px;
            border-radius: 40px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-muted);
            transition: all 0.3s ease;
            margin-bottom: 0;
            user-select: none;
        }

        .mode-switcher input[type="radio"]:checked + label {
            background: var(--brand-gradient);
            color: white;
            box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
        }

        .mode-switcher label:hover {
            color: var(--text-main);
        }

        .grid-layout {
            display: grid;
            gap: 20px;
        }

        /* –°–µ–∫—Ü–∏–∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ */
        .section-content {
            display: none;
            animation: fadeInSection 0.4s ease;
        }
        .section-content.active {
            display: block;
        }
        @keyframes fadeInSection {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        label {
            display: block;
            margin-bottom: 6px;
            color: var(--text-muted);
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .input-group {
            position: relative;
        }

        /* --- –°–¢–ò–õ–ò –ü–û–õ–ï–ô –í–í–û–î–ê --- */
        input, select, textarea {
            width: 100%;
            background-color: var(--input-bg);
            border: 2px solid transparent;
            color: var(--text-main);
            padding: 14px 16px; 
            border-radius: 12px;
            font-size: 0.95rem;
            box-sizing: border-box;
            transition: all 0.2s ease; 
            font-family: inherit;
        }

        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 14px center; 
            background-size: 18px;
            padding-right: 40px; 
            cursor: pointer;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            background-color: #1e293b; 
            border-color: #ec4899; 
            box-shadow: 0 0 0 4px var(--brand-glow);
        }

        .fade-in {
            animation: fadeIn 0.4s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- –ö–ù–û–ü–ö–ò --- */
        .actions {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }

        button {
            flex: 1;
            padding: 14px 20px; 
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            font-size: 0.95rem; 
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px -5px rgba(0, 0, 0, 0.4);
        }

        button:active { transform: scale(0.98); }

        #generate-button, #calc-button {
            background: var(--brand-gradient);
        }
        #generate-button:hover, #calc-button:hover {
            background: var(--brand-gradient-hover);
        }

        #copy-button, #calc-copy-button {
            background-color: #334155;
            border: 1px solid var(--success-color);
            color: var(--success-color);
            display: flex; 
            opacity: 1;
        }
        
        #copy-button:hover, #calc-copy-button:hover {
            background-color: var(--success-color);
            color: white;
        }

        /* --- –ë–õ–û–ö –†–ï–ó–£–õ–¨–¢–ê–¢–ê --- */
        .result-box {
            margin-top: 30px;
            border-top: 1px solid var(--border-color);
            padding-top: 25px;
            opacity: 0;
            transform: translateY(20px);
            transition: border-top 0.3s ease; 
        }
        
        @keyframes resultEntry {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-box.is-visible {
            animation: resultEntry 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; 
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            color: var(--text-main);
            font-size: 0.9rem;
        }

        textarea {
            font-family: 'Consolas', 'Monaco', monospace; 
            background-color: var(--code-bg-light); 
            color: #e2e8f0;
            border: 1px solid var(--border-color);
            line-height: 1.6;
            font-size: 0.9rem;
            resize: vertical;
            padding: 16px;
            border-radius: 12px;
            box-sizing: border-box;
            width: 100%;
            height: 50px; 
            min-height: 50px; 
            transition: height 0.5s cubic-bezier(0.4, 0.0, 0.2, 1); 
            overflow-y: hidden; 
        }

        textarea.is-filled {
            overflow-y: hidden; 
        }
        
        /* --- –ó–ê–ì–û–õ–û–í–ö–ò –°–ï–ö–¶–ò–ô –í –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ï (–û–ë–ù–û–í–õ–ï–ù–ù–´–ï) --- */
        .form-section-title {
            color: var(--text-main); /* –°–¥–µ–ª–∞–ª –±–µ–ª—ã–º, —á—Ç–æ–±—ã –±—ã–ª–æ –≤–∏–¥–Ω–µ–µ */
            font-size: 1.1rem;      /* –£–≤–µ–ª–∏—á–∏–ª —à—Ä–∏—Ñ—Ç */
            font-weight: 800;       /* –°–¥–µ–ª–∞–ª –∂–∏—Ä–Ω–µ–µ */
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 25px;       /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –ø–æ–±–æ–ª—å—à–µ */
            margin-bottom: -5px;
            border-bottom: 2px solid rgba(236, 72, 153, 0.5); /* –†–æ–∑–æ–≤–∞—è –ª–∏–Ω–∏—è –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è */
            padding-bottom: 10px;
        }

        /* --- –ö–ù–û–ü–ö–ê-–°–°–´–õ–ö–ê –ö–ù–ò–ì–ê –ü–†–û–î–ê–ñ --- */
        .label-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .label-row label {
            margin-bottom: 0; /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø —É –ª–µ–π–±–ª–∞, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –≤–Ω—É—Ç—Ä–∏ —Ñ–ª–µ–∫—Å–∞ */
        }

        .sales-book-link {
            font-size: 0.75rem;
            color: #ec4899;
            text-decoration: none;
            border: 1px solid #ec4899;
            padding: 4px 10px;
            border-radius: 8px;
            font-weight: 700;
            text-transform: uppercase;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(236, 72, 153, 0.05);
        }

        .sales-book-link:hover {
            background: #ec4899;
            color: white;
            box-shadow: 0 0 10px rgba(236, 72, 153, 0.4);
        }

        @media (max-width: 600px) {
            .actions {
                flex-direction: column;
            }
        }

    </style>
</head>
<body>

<div class="container">
    <div class="mode-switcher-container">
        <div class="mode-switcher">
            <input type="radio" id="mode-welcome" name="app-mode" value="welcome" checked>
            <label for="mode-welcome">Welcome</label>
            <input type="radio" id="mode-calculator" name="app-mode" value="calculator">
            <label for="mode-calculator">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</label>
        </div>
    </div>

    <div id="section-welcome" class="section-content active">
        <form id="welcome-form" class="grid-layout">
            <div class="input-group">
                <label for="course-select">–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å</label>
                <select id="course-select" required>
                    <option value="" disabled selected>–ù–µ –≤—ã–±—Ä–∞–Ω–æ</option>
                    <option value="Digital-–¥–∏–∑–∞–π–Ω–µ—Ä –Ω–æ–≤–æ–π —ç—Ä—ã 3.0">Digital-–¥–∏–∑–∞–π–Ω–µ—Ä –Ω–æ–≤–æ–π —ç—Ä—ã 3.0</option>
                    <option value="Digital-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0">Digital-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0</option>
                    <option value="NEW 3.0 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω">NEW 3.0 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω</option>
                    <option value="NEW –ü—Ä–æ—Ñ–µ—Å—Å–∏—è UX/UI-–¥–∏–∑–∞–π–Ω–µ—Ä">NEW –ü—Ä–æ—Ñ–µ—Å—Å–∏—è UX/UI-–¥–∏–∑–∞–π–Ω–µ—Ä</option>
                    <option value="–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∏–ª–ª—é—Å—Ç—Ä–∞—Ç–æ—Ä 2.0">–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∏–ª–ª—é—Å—Ç—Ä–∞—Ç–æ—Ä 2.0</option>
                    <option value="–í–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0">–í–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0</option>
                    <option value="–ù–µ–π—Ä–æ–¥–∏–∑–∞–π–Ω–µ—Ä 2.0">–ù–µ–π—Ä–æ–¥–∏–∑–∞–π–Ω–µ—Ä 2.0</option>
                    <option value="Motion-–¥–∏–∑–∞–π–Ω–µ—Ä">Motion-–¥–∏–∑–∞–π–Ω–µ—Ä</option>
                    <option value="NEW –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤">NEW –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤</option>
                    <option value="–î–∏–∑–∞–π–Ω —É–ø–∞–∫–æ–≤–∫–∏">–î–∏–∑–∞–π–Ω —É–ø–∞–∫–æ–≤–∫–∏</option>
                </select>
            </div>

            <div class="input-group fade-in" id="tariff-container" style="display:none;">
                <label for="tariff-select">–¢–∞—Ä–∏—Ñ –æ–±—É—á–µ–Ω–∏—è</label>
                <select id="tariff-select"></select>
            </div>

            <div class="input-group">
                <label for="start-date">–î–∞—Ç–∞ —Å—Ç–∞—Ä—Ç–∞</label>
                <input type="date" id="start-date" required>
            </div>

            <div class="actions">
                <button type="submit" id="generate-button">
                    <span>‚ö° –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</span>
                </button>
                <button type="button" id="copy-button" onclick="copyToClipboard('result-template', 'copy-button')">
                    <span>üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
                </button>
            </div>
        </form>

        <div class="result-box" id="result-box-welcome">
            <div class="result-header">
                <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" color="#ec4899">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <strong>–ì–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç</strong>
            </div>
            <textarea id="result-template" readonly placeholder="// –ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Ç–µ–∫—Å—Ç..."></textarea>
        </div>
    </div>

    <div id="section-calculator" class="section-content">
        <form id="calculator-form" class="grid-layout">
            
            <div class="form-section-title">–¢–µ–∫—É—â–µ–µ –æ–±—É—á–µ–Ω–∏–µ</div>

            <div class="input-group">
                <label>–¢–µ–∫—É—â–∏–π –∫—É—Ä—Å —Å—Ç—É–¥–µ–Ω—Ç–∞ (–∏–∑ —Å–ø–∏—Å–∫–∞)</label>
                <select id="calc-source-course">
                    <option value="" selected>–í–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é / –ù–µ –≤—ã–±—Ä–∞–Ω–æ</option>
                    <option value="Digital-–¥–∏–∑–∞–π–Ω–µ—Ä –Ω–æ–≤–æ–π —ç—Ä—ã 3.0">Digital-–¥–∏–∑–∞–π–Ω–µ—Ä –Ω–æ–≤–æ–π —ç—Ä—ã 3.0</option>
                    <option value="Digital-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0">Digital-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0</option>
                    <option value="NEW 3.0 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω">NEW 3.0 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω</option>
                    <option value="NEW –ü—Ä–æ—Ñ–µ—Å—Å–∏—è UX/UI-–¥–∏–∑–∞–π–Ω–µ—Ä">NEW –ü—Ä–æ—Ñ–µ—Å—Å–∏—è UX/UI-–¥–∏–∑–∞–π–Ω–µ—Ä</option>
                    <option value="–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∏–ª–ª—é—Å—Ç—Ä–∞—Ç–æ—Ä 2.0">–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∏–ª–ª—é—Å—Ç—Ä–∞—Ç–æ—Ä 2.0</option>
                    <option value="–í–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0">–í–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0</option>
                    <option value="–ù–µ–π—Ä–æ–¥–∏–∑–∞–π–Ω–µ—Ä 2.0">–ù–µ–π—Ä–æ–¥–∏–∑–∞–π–Ω–µ—Ä 2.0</option>
                    <option value="Motion-–¥–∏–∑–∞–π–Ω–µ—Ä">Motion-–¥–∏–∑–∞–π–Ω–µ—Ä</option>
                    <option value="NEW –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤">NEW –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤</option>
                    <option value="–î–∏–∑–∞–π–Ω —É–ø–∞–∫–æ–≤–∫–∏">–î–∏–∑–∞–π–Ω —É–ø–∞–∫–æ–≤–∫–∏</option>
                </select>
            </div>

            <div class="input-group fade-in" id="calc-source-tariff-container" style="display:none;">
                <label>–í–∞—à —Ç–∞—Ä–∏—Ñ</label>
                <select id="calc-source-tariff"></select>
            </div>

            <div class="input-group">
                <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è (–º–µ—Å)</label>
                <input type="number" id="calc-duration-months" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 12" value="12" required>
            </div>

            <div class="input-group">
                <label>–°—Ç–æ–∏–º–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é –æ–ø–ª–∞—Ç–∏–ª —Å—Ç—É–¥–µ–Ω—Ç (—Ä—É–±)</label>
                <input type="number" id="calc-paid" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 100000" required>
            </div>

            <div class="input-group">
                <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ–±—É—á–µ–Ω–∏—è</label>
                <input type="date" id="calc-start-date" required>
            </div>

            <div class="input-group">
                <label>–î–∞—Ç–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ–≥–æ–¥–Ω—è)</label>
                <input type="date" id="calc-request-date" required>
            </div>

            <div class="form-section-title">–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –Ω–æ–≤—ã–π –∫—É—Ä—Å</div>

            <div class="input-group">
                <label>–ù–∞ –∫–∞–∫–æ–π –∫—É—Ä—Å –ø–µ—Ä–µ–≤–æ–¥ (–ù–∞–∑–≤–∞–Ω–∏–µ)</label>
                <select id="calc-new-course-name" required>
                    <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å...</option>
                    <option value="Digital-–¥–∏–∑–∞–π–Ω–µ—Ä –Ω–æ–≤–æ–π —ç—Ä—ã 3.0">Digital-–¥–∏–∑–∞–π–Ω–µ—Ä –Ω–æ–≤–æ–π —ç—Ä—ã 3.0</option>
                    <option value="Digital-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0">Digital-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0</option>
                    <option value="NEW 3.0 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω">NEW 3.0 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω</option>
                    <option value="NEW –ü—Ä–æ—Ñ–µ—Å—Å–∏—è UX/UI-–¥–∏–∑–∞–π–Ω–µ—Ä">NEW –ü—Ä–æ—Ñ–µ—Å—Å–∏—è UX/UI-–¥–∏–∑–∞–π–Ω–µ—Ä</option>
                    <option value="–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∏–ª–ª—é—Å—Ç—Ä–∞—Ç–æ—Ä 2.0">–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∏–ª–ª—é—Å—Ç—Ä–∞—Ç–æ—Ä 2.0</option>
                    <option value="–í–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0">–í–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0</option>
                    <option value="–ù–µ–π—Ä–æ–¥–∏–∑–∞–π–Ω–µ—Ä 2.0">–ù–µ–π—Ä–æ–¥–∏–∑–∞–π–Ω–µ—Ä 2.0</option>
                    <option value="Motion-–¥–∏–∑–∞–π–Ω–µ—Ä">Motion-–¥–∏–∑–∞–π–Ω–µ—Ä</option>
                    <option value="NEW –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤">NEW –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤</option>
                    <option value="–î–∏–∑–∞–π–Ω —É–ø–∞–∫–æ–≤–∫–∏">–î–∏–∑–∞–π–Ω —É–ø–∞–∫–æ–≤–∫–∏</option>
                </select>
            </div>

            <div class="input-group">
                <div class="label-row">
                    <label>–°—Ç–æ–∏–º–æ—Å—Ç—å –ù–û–í–û–ì–û –∫—É—Ä—Å–∞ (—Ä—É–±)</label>
                    <a href="https://docs.google.com/spreadsheets/d/1tGX-WJlBGYzmaci4Tb19goY_AQzbHnk3xZJ-pbXyLRs/edit?gid=1976664245#gid=1976664245" target="_blank" class="sales-book-link">
                        üìñ –ö–Ω–∏–≥–∞ –ø—Ä–æ–¥–∞–∂
                    </a>
                </div>
                <input type="number" id="calc-new-cost" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 150000" required>
            </div>

            <div class="input-group">
                <label>–°–∫–∏–¥–∫–∞ –æ—Ç –∫–æ–º–∞–Ω–¥—ã –∑–∞–±–æ—Ç—ã (%)</label>
                <input type="number" id="calc-discount" min="0" max="100" value="20" placeholder="20">
            </div>

            <div class="actions">
                <button type="submit" id="calc-button">
                    <span>üßÆ –ü–æ—Å—á–∏—Ç–∞—Ç—å</span>
                </button>
                <button type="button" id="calc-copy-button" onclick="copyToClipboard('result-calc', 'calc-copy-button')">
                    <span>üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
                </button>
            </div>
        </form>

        <div class="result-box" id="result-box-calc">
            <div class="result-header">
                <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" color="#eab308">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                </svg>
                <strong>–†–∞—Å—á–µ—Ç –ø–µ—Ä–µ–≤–æ–¥–∞</strong>
            </div>
            <textarea id="result-calc" readonly placeholder="// –ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è —Ü–∏—Ñ—Ä—ã..."></textarea>
        </div>
    </div>

</div>

<script>
    /* =========================================
       –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ö–£–†–°–û–í (–ï–î–ò–ù–ê–Ø)
       ========================================= */
    const COURSE_CONFIG = {
        'Digital-–¥–∏–∑–∞–π–Ω–µ—Ä –Ω–æ–≤–æ–π —ç—Ä—ã 3.0': { 
            templateType: 'Standard',
            streamTime: '19:00',
            defaultTariff: '–ë–∞–∑–æ–≤—ã–π',
            tariffs: {
                '–ë–∞–∑–æ–≤—ã–π': { months: 12, chat: 'https://t.me/+qn70Xd6J9aw4ZTVi', customAccess: '–Ω–∞ 18 –º–µ—Å—è—Ü–µ–≤' },
                '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π': { months: 14, chat: 'https://t.me/+qn70Xd6J9aw4ZTVi', customAccess: '–Ω–∞–≤—Å–µ–≥–¥–∞' }
            },
            anketa: 'https://docs.google.com/forms/d/e/1FAIpQLSfS9IitnBvCEi7HjgBYbhoCS2MijKA_y3slFu6fRnJJ7Y7DWA/viewform',
            curatorDZ: '–ú–∞—Ä–∏–Ω–∞ –ò–ª—å–µ–Ω–∫–æ',
            accessYears: 3 
        },
        '–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –∏–ª–ª—é—Å—Ç—Ä–∞—Ç–æ—Ä 2.0': {
            templateType: 'Standard',
            streamTime: '19:00',
            defaultTariff: '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π',
            tariffs: {
                '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π': { months: 9, chat: 'https://t.me/+KVHDByLijP8zYmJi' },
                '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π': { months: 13, chat: 'https://t.me/+KVHDByLijP8zYmJi' }, 
                '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π': { months: 17, chat: 'https://t.me/+KVHDByLijP8zYmJi' }
            }, 
            anketa: 'https://docs.google.com/forms/d/e/1FAIpQLSfS9IitnBvCEi7HjgBYbhoCS2MijKA_y3slFu6fRnJJ7Y7DWA/viewform', 
            accessYears: 3,
            noStream: true
        },
        '–í–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0': { 
            templateType: 'Standard',
            streamTime: '19:00',
            defaultTariff: '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π',
            tariffs: {
                '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π': { months: 12, chat: 'https://t.me/+PG30jTVyFUNiYjQy' }, 
                '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π': { months: 14, chat: 'https://t.me/+PG30jTVyFUNiYjQy' }
            }, 
            anketa: 'https://docs.google.com/forms/d/e/1FAIpQLSfS9IitnBvCEi7HjgBYbhoCS2MijKA_y3slFu6fRnJJ7Y7DWA/viewform', 
            accessYears: 3,
            noStream: true
        },
        'Motion-–¥–∏–∑–∞–π–Ω–µ—Ä': { 
            templateType: 'Standard',
            streamTime: '19:00',
            tariffs: null, 
            chatLink: 'https://t.me/+LBfKLbM3B8Y2MWQy',
            months: 12, 
            accessYears: 3, 
            curatorDZ: '–ü–∞–≤–µ–ª –ü–µ–Ω–¥—é—Ä–∏–Ω',
            anketa: 'https://docs.google.com/forms/d/e/1FAIpQLSfS9IitnBvCEi7HjgBYbhoCS2MijKA_y3slFu6fRnJJ7Y7DWA/viewform',
            isMotion: true,
            noStream: true
        },
        'Digital-–¥–∏–∑–∞–π–Ω–µ—Ä 2.0': { 
            templateType: 'Standard',
            streamTime: '19:00',
            defaultTariff: '–•–æ—á—É –≤—Å–µ –∏ —Å—Ä–∞–∑—É',
            tariffs: {
                '–•–æ—á—É –Ω–∞ —Ñ—Ä–∏–ª–∞–Ω—Å': { months: 6, chat: 'https://t.me/+qn70Xd6J9aw4ZTVi' },
                '–•–æ—á—É —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ': { months: 9, chat: 'https://t.me/+qn70Xd6J9aw4ZTVi' },
                '–•–æ—á—É –≤—Å–µ –∏ —Å—Ä–∞–∑—É': { months: 12, chat: 'https://t.me/+qn70Xd6J9aw4ZTVi' }
            },
            anketa: 'https://docs.google.com/forms/d/e/1FAIpQLSfS9IitnBvCEi7HjgBYbhoCS2MijKA_y3slFu6fRnJJ7Y7DWA/viewform',
            curatorDZ: '–ú–∞—Ä–∏–Ω–∞ –ò–ª—å–µ–Ω–∫–æ',
            accessYears: 3
        },
        'NEW 3.0 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω': {
            templateType: 'Standard',
            streamTime: '18:00',
            defaultTariff: '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π',
            tariffs: {
                '1 —Å—Ç—É–ø–µ–Ω—å': { months: 4, chat: 'https://t.me/+algT3-99H18yOWEy', customAccess: '–Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤' },
                '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π': { months: 7, chat: 'https://t.me/+algT3-99H18yOWEy' },
                '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π': { months: 12, chat: 'https://t.me/+algT3-99H18yOWEy' },
                '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π': { months: 15, chat: 'https://t.me/+algT3-99H18yOWEy' }
            },
            anketa: 'https://docs.google.com/forms/d/e/1FAIpQLSfS9IitnBvCEi7HjgBYbhoCS2MijKA_y3slFu6fRnJJ7Y7DWA/viewform',
            curatorDZ: '–ú–∞—Ä–∏–Ω–∞ –ò–ª—å–µ–Ω–∫–æ',
            accessYears: 3
        },
        'NEW –ü—Ä–æ—Ñ–µ—Å—Å–∏—è UX/UI-–¥–∏–∑–∞–π–Ω–µ—Ä': {
            templateType: 'Standard',
            streamTime: '19:00',
            defaultTariff: '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π',
            tariffs: {
                '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π': { months: 13, chat: 'https://t.me/+PG30jTVyFUNiYjQy' },
                '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π': { months: 16, chat: 'https://t.me/+PG30jTVyFUNiYjQy' }
            },
            anketa: 'https://docs.google.com/forms/d/e/1FAIpQLSfS9IitnBvCEi7HjgBYbhoCS2MijKA_y3slFu6fRnJJ7Y7DWA/viewform',
            curatorDZ: '–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞ –ö–∞–º–µ–Ω—Å–∫–∞—è',
            accessYears: 3,
            noStream: true
        },
        '–ù–µ–π—Ä–æ–¥–∏–∑–∞–π–Ω–µ—Ä 2.0': {
            templateType: 'NeuroDesign',
            months: 3, 
            accessYears: 1, 
            chatLink: 'https://t.me/+RyvUSRyw_T9jMDZi',
            noStream: true
        },
        'NEW –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤': {
            templateType: 'Marketplace',
            defaultTariff: '—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π',
            tariffs: {
                '—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π': { months: 2, accessYears: 1, chat: 'https://t.me/+2RfHq_VV1f0wMThi', curator: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ì–æ–≥–ª–∞—á–µ–≤' },
                '–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏': { months: 2, accessYears: 1, chat: 'https://t.me/+2RfHq_VV1f0wMThi', curator: null }
            },
            anketa: 'https://docs.google.com/forms/d/e/1FAIpQLSfS9IitnBvCEi7HjgBYbhoCS2MijKA_y3slFu6fRnJJ7Y7DWA/viewform',
            accessYears: 1
        },
        '–î–∏–∑–∞–π–Ω —É–ø–∞–∫–æ–≤–∫–∏': {
            templateType: 'Packaging',
            months: 3,
            accessYears: 1,
            noStream: true
        }
    };

    /* =========================================
       –û–ë–©–ò–ï –§–£–ù–ö–¶–ò–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê
       ========================================= */
    
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
    const radios = document.getElementsByName('app-mode');
    const sections = {
        welcome: document.getElementById('section-welcome'),
        calculator: document.getElementById('section-calculator')
    };

    radios.forEach(radio => {
        radio.addEventListener('change', (e) => {
            const mode = e.target.value;
            Object.values(sections).forEach(el => el.classList.remove('active'));
            sections[mode].classList.add('active');
        });
    });

    // –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    async function copyToClipboard(elementId, buttonId) {
        const el = document.getElementById(elementId);
        const btn = document.getElementById(buttonId);
        if (!el.value) return;

        try {
            await navigator.clipboard.writeText(el.value);
            const original = btn.innerHTML;
            btn.innerHTML = '<span>‚úÖ –ì–æ—Ç–æ–≤–æ!</span>';
            setTimeout(() => btn.innerHTML = original, 2000);
        } catch (e) {
            console.error(e);
            btn.innerHTML = '<span>‚ùå –û—à–∏–±–∫–∞</span>';
        }
    }

    // –ê–≤—Ç–æ-–≤—ã—Å–æ—Ç–∞ textarea
    function autoResize(el) {
        el.style.height = 'auto';
        el.style.height = el.scrollHeight + 'px';
    }

    // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    function showResult(boxId, textareaId, text) {
        const box = document.getElementById(boxId);
        const area = document.getElementById(textareaId);
        area.value = text;
        box.classList.add('is-visible');
        autoResize(area);
        box.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    /* =========================================
       –õ–û–ì–ò–ö–ê –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê
       ========================================= */
    
    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç—ã –æ–±—Ä–∞—â–µ–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    const requestDateInput = document.getElementById('calc-request-date');
    requestDateInput.valueAsDate = new Date();

    const elsCalc = {
        sourceCourse: document.getElementById('calc-source-course'),
        sourceTariffCont: document.getElementById('calc-source-tariff-container'),
        sourceTariff: document.getElementById('calc-source-tariff'),
        duration: document.getElementById('calc-duration-months')
    };

    // –û–ë–†–ê–ë–û–¢–ö–ê –í–´–ë–û–†–ê –ò–°–•–û–î–ù–û–ì–û –ö–£–†–°–ê
    elsCalc.sourceCourse.addEventListener('change', () => {
        const courseName = elsCalc.sourceCourse.value;
        const config = COURSE_CONFIG[courseName];
        
        elsCalc.sourceTariff.innerHTML = '';
        
        if (config) {
            if (config.tariffs) {
                elsCalc.sourceTariffCont.style.display = 'block';
                Object.keys(config.tariffs).forEach((name, index) => {
                    const opt = document.createElement('option');
                    opt.value = name;
                    opt.textContent = name;
                    elsCalc.sourceTariff.appendChild(opt);
                    
                    if (index === 0) {
                         const months = config.tariffs[name].months;
                         if (months) elsCalc.duration.value = months;
                    }
                });
            } else {
                elsCalc.sourceTariffCont.style.display = 'none';
                if (config.months) elsCalc.duration.value = config.months;
            }
        } else {
            elsCalc.sourceTariffCont.style.display = 'none';
            elsCalc.duration.value = ''; 
        }
    });

    elsCalc.sourceTariff.addEventListener('change', () => {
        const courseName = elsCalc.sourceCourse.value;
        const tariffName = elsCalc.sourceTariff.value;
        const config = COURSE_CONFIG[courseName];
        
        if (config && config.tariffs && config.tariffs[tariffName]) {
            const months = config.tariffs[tariffName].months;
            if (months) elsCalc.duration.value = months;
        }
    });

    // –†–ê–°–ß–ï–¢
    document.getElementById('calculator-form').addEventListener('submit', (e) => {
        e.preventDefault();

        const paid = parseFloat(document.getElementById('calc-paid').value) || 0;
        const durationMonths = parseFloat(document.getElementById('calc-duration-months').value) || 12;
        const startDateStr = document.getElementById('calc-start-date').value;
        const requestDateStr = document.getElementById('calc-request-date').value;
        const newCourseName = document.getElementById('calc-new-course-name').value;
        const newCost = parseFloat(document.getElementById('calc-new-cost').value) || 0;
        const discountPercent = parseFloat(document.getElementById('calc-discount').value) || 0;

        if (!startDateStr || !requestDateStr) return;

        const start = new Date(startDateStr);
        const requestDate = new Date(requestDateStr);
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Ä–µ–º—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        start.setHours(0,0,0,0);
        requestDate.setHours(0,0,0,0);
        
        let daysStudied = 0;

        if (start > requestDate) {
            // –ó–ê–©–ò–¢–ê: –ï—Å–ª–∏ —Å—Ç–∞—Ä—Ç –ø–æ–∑–∂–µ –æ–±—Ä–∞—â–µ–Ω–∏—è -> 0 –¥–Ω–µ–π
            daysStudied = 0;
        } else {
            const diffTime = Math.abs(requestDate - start);
            daysStudied = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
        }
        
        const AVG_DAYS_IN_MONTH = 30.44;
        const totalCourseDays = Math.round(durationMonths * AVG_DAYS_IN_MONTH);

        let pricePerDay = 0;
        if (totalCourseDays > 0) {
            pricePerDay = paid / totalCourseDays;
        }
        
        let consumedAmount = pricePerDay * daysStudied;
        if (consumedAmount > paid) consumedAmount = paid; 

        const residualAmount = paid - consumedAmount;

        let toPayBase = newCost - residualAmount;
        if (toPayBase < 0) toPayBase = 0; 

        const getInstallment = (months) => Math.round(toPayBase / months).toLocaleString('ru-RU');

        const discountAmount = toPayBase * (discountPercent / 100);
        const oneTimePayment = Math.round(toPayBase - discountAmount);

        const fmt = (num) => Math.round(num).toLocaleString('ru-RU');
        const dateStream = new Date().toLocaleDateString('ru-RU');

        const text = `–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ –∫—É—Ä—Å ${newCourseName} // –ü–æ—Ç–æ–∫ ${dateStream} —Å–æ—Å—Ç–∞–≤–∏—Ç —Ä.${fmt(toPayBase)}
–í–æ–∑–º–æ–∂–Ω–∞ –±–µ—Å–ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Ä–∞—Å—Å—Ä–æ—á–∫–∞ –≤ –±–∞–Ω–∫–µ:¬†
–Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤ ‚Äî ${getInstallment(6)} —Ä./–º–µ—Å.
–Ω–∞ 12 –º–µ—Å—è—Ü–µ–≤ ‚Äî ${getInstallment(12)} —Ä./–º–µ—Å.
–Ω–∞ 24 –º–µ—Å—è—Ü–∞ ‚Äî ${getInstallment(24)} —Ä./–º–µ—Å.
–Ω–∞ 36 –º–µ—Å—è—Ü–µ–≤ ‚Äî ${getInstallment(36)} —Ä./–º–µ—Å.

–ê –ø—Ä–∏ –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ–π –æ–ø–ª–∞—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ –æ—Ç –ö–æ–º–∞–Ω–¥—ã –∑–∞–±–æ—Ç—ã -${discountPercent}%üî•
–°—Ç–æ–∏–º–æ—Å—Ç—å –º–æ–∂–µ—Ç —Å–æ—Å—Ç–∞–≤–∏—Ç—å: ${fmt(oneTimePayment)} —Ä.`;

        showResult('result-box-calc', 'result-calc', text);
    });


    /* =========================================
       –õ–û–ì–ò–ö–ê WELCOME
       ========================================= */

    // Helper functions
    const isInvalidDate = (date) => date instanceof Date && isNaN(date.getTime());
    const formatDateDDMMYYYY = (date) => {
        if (isInvalidDate(date)) return '00.00.0000';
        const d = date.getDate().toString().padStart(2, '0');
        const m = (date.getMonth() + 1).toString().padStart(2, '0');
        const y = date.getFullYear();
        return `${d}.${m}.${y}`;
    };
    const formatDateFull = (date) => {
        if (isInvalidDate(date)) return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –¥–∞—Ç–∞'; 
        return date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' }).replace(/(\s–≥\.)?$/, ' –≥.');
    };
    const formatDateStream = (date) => {
        if (isInvalidDate(date)) return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –¥–∞—Ç–∞'; 
        return date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'long' });
    };
    const getMonthText = (n) => {
        if (n === 1) return '–º–µ—Å—è—Ü';
        if (n >= 2 && n <= 4) return '–º–µ—Å—è—Ü–∞';
        return '–º–µ—Å—è—Ü–µ–≤';
    };
    const calculateEndDate = (startDate, months) => {
        if (isInvalidDate(startDate)) return new Date(); 
        const d = new Date(startDate);
        const dayOfMonth = d.getDate();
        d.setMonth(d.getMonth() + months);
        if (d.getDate() < dayOfMonth) { 
            d.setDate(0);
        }
        return d;
    }
    const getGreetingTime = () => {
        const h = new Date().getHours();
        return (h >= 5 && h < 12) ? "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ" : (h >= 12 && h < 18) ? "–î–æ–±—Ä—ã–π –¥–µ–Ω—å" : "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä";
    };

    // UI Logic Welcome
    const elsWelcome = {
        course: document.getElementById('course-select'),
        tariffCont: document.getElementById('tariff-container'),
        tariff: document.getElementById('tariff-select'),
        date: document.getElementById('start-date'),
        form: document.getElementById('welcome-form')
    };

    elsWelcome.course.addEventListener('change', () => {
        const course = elsWelcome.course.value;
        const config = COURSE_CONFIG[course];
        elsWelcome.tariff.innerHTML = '';
        if (config && config.tariffs) {
            elsWelcome.tariffCont.style.display = 'block';
            elsWelcome.tariff.setAttribute('required', 'required');
            const isMp = config.templateType === 'Marketplace';
            const defaultTariffName = config.defaultTariff; 
            let firstTariffValue = ''; 

            Object.keys(config.tariffs).forEach((name, index) => {
                const t = config.tariffs[name];
                const opt = document.createElement('option');
                opt.value = name;
                let label = `¬´${name}¬ª`;
                if (!isMp && t.months) label += ` (${t.months} ${getMonthText(t.months)})`;
                opt.textContent = label;
                if (index === 0) firstTariffValue = name;
                if (name === defaultTariffName) opt.selected = true;
                elsWelcome.tariff.appendChild(opt);
            });
            if (!elsWelcome.tariff.value && elsWelcome.tariff.options.length > 0) elsWelcome.tariff.value = firstTariffValue; 
        } else {
            elsWelcome.tariffCont.style.display = 'none';
            elsWelcome.tariff.removeAttribute('required');
        }
    });

    const COMMON_TEXT = {
        greeting: (time) => `${time}ü©∑ –ù–∞ —Å–≤—è–∑–∏ –ö–æ–º–∞–Ω–¥–∞ –∑–∞–±–æ—Ç—ã –æ—Ç —à–∫–æ–ª—ã –õ–æ–≥–æ–º–∞—à–∏–Ω–∞ —É—á–∏—Ç üíõ –ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—É—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –Ω–∞–º –µ–∂–µ–¥–Ω–µ–≤–Ω–æ, —Ä–∞–±–æ—Ç–∞–µ–º —Å 10:00 –¥–æ 22:00 –ø–æ –º—Å–∫\n\n–ú—ã –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –≤–∞—Å –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥—É –æ–±—É—á–µ–Ω–∏—è. –í —ç—Ç–æ–π —à–∫–æ–ª–µ –≤—ã –≤—Å–µ–≥–¥–∞ –Ω–∞–π–¥–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É, –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏, –∫–æ–Ω–µ—á–Ω–æ, –º–Ω–æ–≥–æ –Ω–æ–≤—ã—Ö –¥—Ä—É–∑–µ–π. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –∫–∞–∫–∏–µ-–ª–∏–±–æ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞—Ö–æ—á–µ—Ç—Å—è –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å, –º—ã –≤—Å–µ–≥–¥–∞ –æ—Ç–∫—Ä—ã—Ç—ã –¥–ª—è –≤–∞—Å.`,
        introBlockPast: `üñá–í—Å–µ –±–ª–æ–∫–∏ –∫—É—Ä—Å–∞, –≤–∫–ª—é—á–∞—è –≤–≤–æ–¥–Ω—ã–π –±–ª–æ–∫ "–°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∫—É—Ä—Å –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–π", —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è. –í–≤–æ–¥–Ω—ã–π –±–ª–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±—É—á–µ–Ω–∏–µ" ‚Äî "–¢—Ä–µ–Ω–∏–Ω–≥–∏", —Å–∞–º—ã–π –ø–µ—Ä–≤—ã–π –≤ —Å–ø–∏—Å–∫–µ.`,
        introBlockFuture: (date) => `üñá–û–±—É—á–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ–º —Å –∏–∑—É—á–µ–Ω–∏—è –±–ª–æ–∫–∞ "–°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∫—É—Ä—Å –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–π", —ç—Ç–æ –≤–≤–æ–¥–Ω—ã–π –±–ª–æ–∫, –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±—É—á–µ–Ω–∏–µ" ‚Äî "–¢—Ä–µ–Ω–∏–Ω–≥–∏", —Å–∞–º—ã–π –ø–µ—Ä–≤—ã–π –≤ —Å–ø–∏—Å–∫–µ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —Å ${date}`,
        footer: `üñá–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –∫–∞–∫–∏–µ-–ª–∏–±–æ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—É—á–µ–Ω–∏—é, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–∞–Ω–∞, –Ω—É–∂–Ω–∞ –º–æ—Ç–∏–≤–∞—Ü–∏—è, –≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–∞–º ‚Äî –≤ –ö–æ–º–∞–Ω–¥—É –ó–∞–±–æ—Ç—ã. –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å 10 –¥–æ 22 –ø–æ –ú–°–ö\n\nüñá–ù–∞–º –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –∫—É—Ä—Å—É –∏ –Ω–∞—à–µ–π —Ä–∞–±–æ—Ç–µ –≤ —Ü–µ–ª–æ–º. –õ–æ–≥–æ–±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤–∞–º –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∫—É—Ä—Å—É, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º, –∞ —Ç–∞–∫–∂–µ –µ–∂–µ–º–µ—Å—è—á–Ω—É—é –∞–Ω–∫–µ—Ç—É –æ—Ç–∑—ã–≤–æ–≤ —à–∫–æ–ª—ã –õ–æ–≥–æ–º–∞—à–∏–Ω–∞ —É—á–∏—Ç. –ï—ë –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –∑–∞–ø–æ–ª–Ω—è—Ç—å, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–∞—à–µ –æ–±—É—á–µ–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç—É –ª—É—á—à–µ –¥–ª—è –≤–∞—Å\n\n–° –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∂–¥–µ–º –≤–∞—Å –Ω–∞ –æ–±—É—á–µ–Ω–∏–∏ üíï\nhttps://get.logomachine.ru/cms/system/login`,
        marketPlaceFooter: `üñá–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –∫–∞–∫–∏–µ-–ª–∏–±–æ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—É—á–µ–Ω–∏—é —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞, –Ω—É–∂–Ω–∞ –º–æ—Ç–∏–≤–∞—Ü–∏—è, –≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–∞–º ‚Äî –≤ –ö–æ–º–∞–Ω–¥—É –ó–∞–±–æ—Ç—ã. –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å 10 –¥–æ 22 –ø–æ –ú–°–ö\n\n–° –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∂–¥–µ–º –≤–∞—Å –Ω–∞ –æ–±—É—á–µ–Ω–∏–∏ üíï\nhttps://get.logomachine.ru/cms/system/login`,
        packagingFooter: `üñá–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –∫–∞–∫–∏–µ-–ª–∏–±–æ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—É—á–µ–Ω–∏—é, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–∞–Ω–∞, –Ω—É–∂–Ω–∞ –º–æ—Ç–∏–≤–∞—Ü–∏—è, –≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–∞–º ‚Äî –≤ –ö–æ–º–∞–Ω–¥—É –ó–∞–±–æ—Ç—ã. –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å 10 –¥–æ 22 –ø–æ –ú–°–ö\n\n–° –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∂–¥–µ–º –≤–∞—Å –Ω–∞ –æ–±—É—á–µ–Ω–∏–∏ üíï\nhttps://get.logomachine.ru/cms/system/login`
    };

    function getStreamInfo(isPast, dateObj, streamTime, chatLink, isMotion = false) {
        const dateFull = formatDateFull(dateObj);
        const dateStream = formatDateStream(dateObj);
        const time = streamTime || '19:00';
        const dateDisplay = isMotion ? dateStream : dateFull;
        if (isPast) {
            return `üñá${dateDisplay} –≤ ${time} –ø–æ –ú–°–ö –ø—Ä–æ—à–µ–ª –ø—Ä—è–º–æ–π —ç—Ñ–∏—Ä, –≥–¥–µ –º—ã —Ä–∞—Å—Å–∫–∞–∑–∞–ª–∏ —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ, —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ —É—á–µ–±–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É, –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –≤ –ø—Ä—è–º–æ–º —ç—Ñ–∏—Ä–µ. –ó–∞–ø–∏—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —á–∞—Ç–µ.`;
        } else {
            return `üñá${dateDisplay} –≤ ${time} –ø–æ –ú–°–ö –ø—Ä–æ–π–¥–µ—Ç –ø—Ä—è–º–æ–π —ç—Ñ–∏—Ä, –≥–¥–µ –º—ã —Ä–∞—Å—Å–∫–∞–∂–µ–º —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —É—á–µ–±–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É, –æ—Ç–≤–µ—Ç–∏–º –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –≤ –ø—Ä—è–º–æ–º —ç—Ñ–∏—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–π–¥–µ—Ç –≤ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–º —Ç–µ–ª–µ–≥—Ä–∞–º–º-—á–∞—Ç–µ (–æ–Ω –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω –∏ –≤—ã–ª–æ–∂–µ–Ω –≤ —á–∞—Ç ${chatLink || ''})`;
        }
    }

    const GENERATORS = {
        Standard: (config, data) => {
            const { startDate, tariffName, isPast, dates } = data;
            let months, chatLink, fullCourseName;
            let t = config.tariffs ? config.tariffs[tariffName || Object.keys(config.tariffs)[0]] : null;
            
            if (t) {
                months = t.months;
                chatLink = t.chat;
                const isGraphDesignStep1 = (data.courseTitle === 'NEW 3.0 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω' && tariffName === '1 —Å—Ç—É–ø–µ–Ω—å');
                fullCourseName = isGraphDesignStep1 ? '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω–µ—Ä 1 —Å—Ç—É–ø–µ–Ω—å. –ü–æ—Å–≤—è—â–µ–Ω–∏–µ –≤ –¥–∏–∑–∞–π–Ω.' : `${data.courseTitle} // –¢–∞—Ä–∏—Ñ ${tariffName}`;
            } else {
                months = config.months;
                chatLink = config.chatLink;
                fullCourseName = `${data.courseTitle}`;
            }

            const startPhrase = isPast ? `–ú—ã –Ω–∞—á–∞–ª–∏ –æ–±—É—á–µ–Ω–∏–µ (${dates.full})` : `–ú—ã –Ω–∞—á–∏–Ω–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ –≤–º–µ—Å—Ç–µ (${dates.full})`;
            const startPhraseMotion = isPast ? `–ú—ã –Ω–∞—á–∞–ª–∏ –æ–±—É—á–µ–Ω–∏–µ (–ø–æ—Ç–æ–∫ ${dates.stream})` : `–ú—ã –Ω–∞—á–∏–Ω–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ –≤–º–µ—Å—Ç–µ (–ø–æ—Ç–æ–∫ ${dates.stream})`;

            let curatorBlock = `üñá–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö —Ä–∞–±–æ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ. –ö—É—Ä–∞—Ç–æ—Ä –¥–∞—Å—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø–æ –≤–∞—à–µ–π —Ä–∞–±–æ—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π. –û –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö –∫—É—Ä–∞—Ç–æ—Ä–∞ –±—É–¥–µ—Ç —Å–æ–æ–±—â–∞—Ç—å –õ–æ–≥–æ–±–æ—Ç, –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—É—á–µ–Ω–∏—è.`;
            if (config.isMotion) curatorBlock += ` –¢–∞–∫–∂–µ –≤ —á–∞—Ç–µ –∫—É—Ä—Å–∞ –µ—Å—Ç—å –∫—É—Ä–∞—Ç–æ—Ä - ${config.curatorDZ}, –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è...`;
            else if (config.curatorDZ) curatorBlock += ` –¢–∞–∫–∂–µ –≤ —á–∞—Ç–µ –∫—É—Ä—Å–∞ –µ—Å—Ç—å –∫—É—Ä–∞—Ç–æ—Ä ${config.curatorDZ}, –∫ –Ω–µ–π –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è...`;

            let accessPart = (t && t.customAccess) ? t.customAccess : `–Ω–∞ ${config.accessYears} –≥–æ–¥–∞`;
            let accessSuffix = (t && t.customAccess && t.customAccess.toLowerCase() === '–Ω–∞–≤—Å–µ–≥–¥–∞') ? '' : ' —Å–æ –¥–Ω—è —Å—Ç–∞—Ä—Ç–∞ –ø–æ—Ç–æ–∫–∞';

            const parts = [];
            const hLine = config.isMotion 
                ? `ü©∑ –£ –≤–∞—Å –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω –∫—É—Ä—Å ¬´${data.courseTitle}¬ª // –ü–æ—Ç–æ–∫ ${dates.short} –ø–µ—Ä–∏–æ–¥ –æ–±—É—á–µ–Ω–∏—è ${months} ${getMonthText(months)} —Å–æ –¥–Ω—è —Å—Ç–∞—Ä—Ç–∞...`
                : `üñá–£ –≤–∞—Å –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω –∫—É—Ä—Å "${fullCourseName} // –ü–æ—Ç–æ–∫ ${dates.short}", –ø–µ—Ä–∏–æ–¥ –æ–±—É—á–µ–Ω–∏—è ${months} ${getMonthText(months)} —Å–æ –¥–Ω—è —Å—Ç–∞—Ä—Ç–∞...`;
            parts.push(hLine);
            
            const startLine = config.isMotion ? `ü©∑ ${startPhraseMotion}` : `üñá${startPhrase}`;
            parts.push(`${startLine}, –∫—É—Ä—Å —Ä–∞–∑–º–µ—â–µ–Ω –Ω–∞ —É–¥–æ–±–Ω–æ–π –æ–±—É—á–∞—é—â–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ GetCourse... ${!config.isMotion ? chatLink : ''}`);

            if (!config.noStream) {
                const streamInfo = getStreamInfo(isPast, startDate, config.streamTime, chatLink, config.isMotion);
                parts.push(`${config.isMotion ? 'ü©∑' : ''}${streamInfo} ${!isPast && !config.isMotion ? '‚ÄºÔ∏è' : ''}`);
            }

            const bullet = config.isMotion ? 'ü©∑' : 'üñá';
            parts.push(`${bullet}–°—Å—ã–ª–æ—á–∫–∞ –Ω–∞ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π —á–∞—Ç: ${chatLink} ${!isPast && !config.isMotion ? '‚ÄºÔ∏è' : ''}`);
            parts.push(`${bullet}–í–∞–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É —Å—Ç—É–¥–µ–Ω—Ç–∞: ${config.anketa} ${!isPast && !config.isMotion ? '‚ÄºÔ∏è' : ''}`);

            if (!config.isMotion) {
                if (data.courseTitle === 'NEW 3.0 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω' && tariffName === '1 —Å—Ç—É–ø–µ–Ω—å') {
                     parts.push(`üñá–ö—É—Ä—Å –±—É–¥–µ—Ç –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±—É—á–µ–Ω–∏–µ" ‚Äî "–¢—Ä–µ–Ω–∏–Ω–≥–∏", –¥–æ—Å—Ç—É–ø —Å ${dates.short}`);
                } else if (data.courseTitle === 'Digital-–¥–∏–∑–∞–π–Ω–µ—Ä –Ω–æ–≤–æ–π —ç—Ä—ã 3.0') {
                    const actionWord = isPast ? '–æ—Ç–∫—Ä—ã—Ç—ã' : '–æ—Ç–∫—Ä–æ—é—Ç—Å—è';
                    parts.push(`üñá–û–±—É—á–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –º–æ–¥—É–ª—è ¬´–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –±–æ—Ä—Ç¬ª... –û—Å—Ç–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ ${actionWord} —Å ${dates.short}`);
                } else {
                    parts.push(isPast ? COMMON_TEXT.introBlockPast : COMMON_TEXT.introBlockFuture(dates.short));
                }
            }
            parts.push(config.isMotion ? 'ü©∑ ' + curatorBlock.replace(/üñá/g, '') : curatorBlock);
            return parts.join('\n\n');
        },
        NeuroDesign: (config, data) => {
             return `üíõ –£ –≤–∞—Å –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω –∫—É—Ä—Å ¬´${data.courseTitle} // ${data.dates.full}¬ª... (–¢–µ–∫—Å—Ç —Å–æ–∫—Ä–∞—â–µ–Ω –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞, –ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å)`;
        },
        Marketplace: (config, data) => {
            return `–£ –≤–∞—Å –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω –∫—É—Ä—Å ${data.courseTitle} ${data.tariffName}... (–¢–µ–∫—Å—Ç —Å–æ–∫—Ä–∞—â–µ–Ω –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞)`;
        },
        Packaging: (config, data) => {
            const { isPast, dates } = data;
            const startPhrase = isPast ? `–ú—ã –Ω–∞—á–∞–ª–∏ –æ–±—É—á–µ–Ω–∏–µ –≤–º–µ—Å—Ç–µ (${dates.full})` : `–ú—ã –Ω–∞—á–∏–Ω–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ –≤–º–µ—Å—Ç–µ (${dates.full})`;
            const parts = [];
            parts.push(`üñá–£ –≤–∞—Å –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω –∫—É—Ä—Å ¬´${data.courseTitle}¬ª // –ü–æ—Ç–æ–∫ ${dates.short}, –ø–µ—Ä–∏–æ–¥ –æ–±—É—á–µ–Ω–∏—è ${config.months} –º–µ—Å—è—Ü–∞...`);
            parts.push(`üñá${startPhrase}, –∫—É—Ä—Å —Ä–∞–∑–º–µ—â–µ–Ω –Ω–∞ —É–¥–æ–±–Ω–æ–π –æ–±—É—á–∞—é—â–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ GetCourse...`);
            if (isPast) parts.push(`üñá–ö—É—Ä—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–û–±—É—á–µ–Ω–∏–µ¬ª ‚Äî ¬´–¢—Ä–µ–Ω–∏–Ω–≥–∏¬ª`);
            else parts.push(`üñá–ö—É—Ä—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–û–±—É—á–µ–Ω–∏–µ¬ª ‚Äî ¬´–¢—Ä–µ–Ω–∏–Ω–≥–∏¬ª —Å ${dates.short}`);
            parts.push(`üñá–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö —Ä–∞–±–æ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ...`);
            return parts.join('\n\n');
        }
    };

    elsWelcome.form.addEventListener('submit', (e) => {
        e.preventDefault();
        const courseTitle = elsWelcome.course.value;
        const tariffName = elsWelcome.tariff.value;
        const rawDate = elsWelcome.date.value;
        const config = COURSE_CONFIG[courseTitle];
        if (!config) return;

        const startDate = new Date(rawDate.replace(/-/g, '/'));
        const today = new Date();
        today.setHours(0,0,0,0);
        const isPast = isInvalidDate(startDate) ? false : startDate < today;
        const dates = {
            full: formatDateFull(startDate),
            short: formatDateDDMMYYYY(startDate),
            stream: formatDateStream(startDate)
        };

        const generator = GENERATORS[config.templateType] || GENERATORS.Standard;
        let bodyText = generator(config, { courseTitle, tariffName, startDate, isPast, dates });
        let text = COMMON_TEXT.greeting(getGreetingTime()) + '\n\n' + bodyText;

        let footerText = COMMON_TEXT.footer;
        if (config.templateType === 'Marketplace') footerText = COMMON_TEXT.marketPlaceFooter;
        if (config.templateType === 'Packaging') footerText = COMMON_TEXT.packagingFooter;

        text += '\n\n' + footerText;
        showResult('result-box-welcome', 'result-template', text);
    });

</script>
</body>
</html>
